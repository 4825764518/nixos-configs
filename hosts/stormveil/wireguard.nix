{ lib, config, pkgs, ... }:

let
  makeMullvadConfig = { publicKey, endpoint, allowedIPs }: {
    address = [ "10.64.180.86/32" ];
    privateKeyFile =
      "${config.sops.secrets.stormveil-wireguard-mullvad-privkey.path}";
    peers = [{
      inherit allowedIPs publicKey endpoint;
      persistentKeepalive = 25;
    }];
  };
in {
  config = {
    sops.secrets.stormveil-wireguard-privkey = {
      sopsFile = ../../secrets/stormveil/wireguard.yaml;
    };
    sops.secrets.stormveil-wireguard-mullvad-privkey = {
      sopsFile = ../../secrets/stormveil/wireguard.yaml;
    };
    networking.wireguard.interfaces = {
      wg-internal = {
        ips = [ "192.168.171.20/24" ];
        listenPort = 51820;
        privateKeyFile =
          "${config.sops.secrets.stormveil-wireguard-privkey.path}";
        peers = [
          {
            # ovh
            publicKey = "Mo1wqAe5SNixIikRSlVY9DpT5Nz19mZenWym3voa0TM=";
            allowedIPs = [ "192.168.170.0/24" ];
            endpoint = "192.99.14.203:51820";
            persistentKeepalive = 25;
          }
          {
            # morne
            publicKey = "+y5ZjN6GToEbF3fwRnwJJH+tDZsgEvsJXoKyno0SfVg=";
            allowedIPs =
              [ "192.168.171.0/24" "10.67.238.34/32" "10.64.57.118/32" ];
            endpoint = "51.222.128.114:51820";
            persistentKeepalive = 25;
          }
        ];
      };
    };
    networking.wg-quick.interfaces = {
      mullvad-ca15 = makeMullvadConfig {
        publicKey = "dn27fhdet9sxRl3biHeCBvA5edZMC03bh0zZIj3DJzI=";
        endpoint = "89.36.78.226:51820";
        allowedIPs = [
          "0.0.0.0/5"
          "8.0.0.0/7"
          "10.0.0.0/10"
          "10.64.0.0/19"
          "10.64.32.0/20"
          "10.64.48.0/21"
          "10.64.56.0/24"
          "10.64.57.0/26"
          "10.64.57.64/27"
          "10.64.57.96/28"
          "10.64.57.112/30"
          "10.64.57.116/31"
          "10.64.57.119/32"
          "10.64.57.120/29"
          "10.64.57.128/25"
          "10.64.58.0/23"
          "10.64.60.0/22"
          "10.64.64.0/18"
          "10.64.128.0/17"
          "10.65.0.0/16"
          "10.66.0.0/16"
          "10.67.0.0/17"
          "10.67.128.0/18"
          "10.67.192.0/19"
          "10.67.224.0/21"
          "10.67.232.0/22"
          "10.67.236.0/23"
          "10.67.238.0/27"
          "10.67.238.32/31"
          "10.67.238.35/32"
          "10.67.238.36/30"
          "10.67.238.40/29"
          "10.67.238.48/28"
          "10.67.238.64/26"
          "10.67.238.128/25"
          "10.67.239.0/24"
          "10.67.240.0/20"
          "10.68.0.0/14"
          "10.72.0.0/13"
          "10.80.0.0/12"
          "10.96.0.0/11"
          "10.128.0.0/9"
          "11.0.0.0/8"
          "12.0.0.0/6"
          "16.0.0.0/4"
          "32.0.0.0/4"
          "48.0.0.0/7"
          "50.0.0.0/8"
          "51.0.0.0/9"
          "51.128.0.0/10"
          "51.192.0.0/12"
          "51.208.0.0/13"
          "51.216.0.0/14"
          "51.220.0.0/15"
          "51.222.0.0/17"
          "51.222.128.0/26"
          "51.222.128.64/27"
          "51.222.128.96/28"
          "51.222.128.112/31"
          "51.222.128.115/32"
          "51.222.128.116/30"
          "51.222.128.120/29"
          "51.222.128.128/25"
          "51.222.129.0/24"
          "51.222.130.0/23"
          "51.222.132.0/22"
          "51.222.136.0/21"
          "51.222.144.0/20"
          "51.222.160.0/19"
          "51.222.192.0/18"
          "51.223.0.0/16"
          "51.224.0.0/11"
          "52.0.0.0/6"
          "56.0.0.0/5"
          "64.0.0.0/4"
          "80.0.0.0/5"
          "88.0.0.0/8"
          "89.0.0.0/11"
          "89.32.0.0/14"
          "89.36.0.0/18"
          "89.36.64.0/21"
          "89.36.72.0/22"
          "89.36.76.0/23"
          "89.36.78.0/25"
          "89.36.78.128/26"
          "89.36.78.192/27"
          "89.36.78.224/31"
          "89.36.78.227/32"
          "89.36.78.228/30"
          "89.36.78.232/29"
          "89.36.78.240/28"
          "89.36.79.0/24"
          "89.36.80.0/20"
          "89.36.96.0/19"
          "89.36.128.0/17"
          "89.37.0.0/16"
          "89.38.0.0/15"
          "89.40.0.0/13"
          "89.48.0.0/12"
          "89.64.0.0/10"
          "89.128.0.0/9"
          "90.0.0.0/7"
          "92.0.0.0/6"
          "96.0.0.0/3"
          "128.0.0.0/2"
          "192.0.0.0/10"
          "192.64.0.0/11"
          "192.96.0.0/15"
          "192.98.0.0/16"
          "192.99.0.0/21"
          "192.99.8.0/22"
          "192.99.12.0/23"
          "192.99.14.0/25"
          "192.99.14.128/26"
          "192.99.14.192/29"
          "192.99.14.200/31"
          "192.99.14.202/32"
          "192.99.14.204/30"
          "192.99.14.208/28"
          "192.99.14.224/27"
          "192.99.15.0/24"
          "192.99.16.0/20"
          "192.99.32.0/19"
          "192.99.64.0/18"
          "192.99.128.0/17"
          "192.100.0.0/14"
          "192.104.0.0/13"
          "192.112.0.0/12"
          "192.128.0.0/11"
          "192.160.0.0/13"
          "192.169.0.0/16"
          "192.170.0.0/15"
          "192.172.0.0/14"
          "192.176.0.0/12"
          "192.192.0.0/10"
          "193.0.0.0/8"
          "194.0.0.0/7"
          "196.0.0.0/6"
          "200.0.0.0/5"
          "208.0.0.0/4"
          "224.0.0.0/3"
        ];
      };
      mullvad-jp3 = makeMullvadConfig {
        publicKey = "oWo/Ljb6SYqJYHHhRd8nKDjFJx9MqfouEYSJvba4XH4=";
        endpoint = "45.8.223.225:51820";
        allowedIPs = [
          "0.0.0.0/5"
          "8.0.0.0/7"
          "10.0.0.0/10"
          "10.64.0.0/19"
          "10.64.32.0/20"
          "10.64.48.0/21"
          "10.64.56.0/24"
          "10.64.57.0/26"
          "10.64.57.64/27"
          "10.64.57.96/28"
          "10.64.57.112/30"
          "10.64.57.116/31"
          "10.64.57.119/32"
          "10.64.57.120/29"
          "10.64.57.128/25"
          "10.64.58.0/23"
          "10.64.60.0/22"
          "10.64.64.0/18"
          "10.64.128.0/17"
          "10.65.0.0/16"
          "10.66.0.0/16"
          "10.67.0.0/17"
          "10.67.128.0/18"
          "10.67.192.0/19"
          "10.67.224.0/21"
          "10.67.232.0/22"
          "10.67.236.0/23"
          "10.67.238.0/27"
          "10.67.238.32/31"
          "10.67.238.35/32"
          "10.67.238.36/30"
          "10.67.238.40/29"
          "10.67.238.48/28"
          "10.67.238.64/26"
          "10.67.238.128/25"
          "10.67.239.0/24"
          "10.67.240.0/20"
          "10.68.0.0/14"
          "10.72.0.0/13"
          "10.80.0.0/12"
          "10.96.0.0/11"
          "10.128.0.0/9"
          "11.0.0.0/8"
          "12.0.0.0/6"
          "16.0.0.0/4"
          "32.0.0.0/5"
          "40.0.0.0/6"
          "44.0.0.0/8"
          "45.0.0.0/13"
          "45.8.0.0/17"
          "45.8.128.0/18"
          "45.8.192.0/20"
          "45.8.208.0/21"
          "45.8.216.0/22"
          "45.8.220.0/23"
          "45.8.222.0/24"
          "45.8.223.0/25"
          "45.8.223.128/26"
          "45.8.223.192/27"
          "45.8.223.224/32"
          "45.8.223.226/31"
          "45.8.223.228/30"
          "45.8.223.232/29"
          "45.8.223.240/28"
          "45.8.224.0/19"
          "45.9.0.0/16"
          "45.10.0.0/15"
          "45.12.0.0/14"
          "45.16.0.0/12"
          "45.32.0.0/11"
          "45.64.0.0/10"
          "45.128.0.0/9"
          "46.0.0.0/7"
          "48.0.0.0/7"
          "50.0.0.0/8"
          "51.0.0.0/9"
          "51.128.0.0/10"
          "51.192.0.0/12"
          "51.208.0.0/13"
          "51.216.0.0/14"
          "51.220.0.0/15"
          "51.222.0.0/17"
          "51.222.128.0/26"
          "51.222.128.64/27"
          "51.222.128.96/28"
          "51.222.128.112/31"
          "51.222.128.115/32"
          "51.222.128.116/30"
          "51.222.128.120/29"
          "51.222.128.128/25"
          "51.222.129.0/24"
          "51.222.130.0/23"
          "51.222.132.0/22"
          "51.222.136.0/21"
          "51.222.144.0/20"
          "51.222.160.0/19"
          "51.222.192.0/18"
          "51.223.0.0/16"
          "51.224.0.0/11"
          "52.0.0.0/6"
          "56.0.0.0/5"
          "64.0.0.0/2"
          "128.0.0.0/2"
          "192.0.0.0/10"
          "192.64.0.0/11"
          "192.96.0.0/15"
          "192.98.0.0/16"
          "192.99.0.0/21"
          "192.99.8.0/22"
          "192.99.12.0/23"
          "192.99.14.0/25"
          "192.99.14.128/26"
          "192.99.14.192/29"
          "192.99.14.200/31"
          "192.99.14.202/32"
          "192.99.14.204/30"
          "192.99.14.208/28"
          "192.99.14.224/27"
          "192.99.15.0/24"
          "192.99.16.0/20"
          "192.99.32.0/19"
          "192.99.64.0/18"
          "192.99.128.0/17"
          "192.100.0.0/14"
          "192.104.0.0/13"
          "192.112.0.0/12"
          "192.128.0.0/11"
          "192.160.0.0/13"
          "192.169.0.0/16"
          "192.170.0.0/15"
          "192.172.0.0/14"
          "192.176.0.0/12"
          "192.192.0.0/10"
          "193.0.0.0/8"
          "194.0.0.0/7"
          "196.0.0.0/6"
          "200.0.0.0/5"
          "208.0.0.0/4"
          "224.0.0.0/3"
        ];
      };
      mullvad-md1 = makeMullvadConfig {
        publicKey = "BQobp2UXHJguYGz06WWJGJV6QytNIZlgMwr6Joufhx8=";
        endpoint = "178.175.131.98:51820";
        allowedIPs = [
          "0.0.0.0/5"
          "8.0.0.0/7"
          "10.0.0.0/10"
          "10.64.0.0/19"
          "10.64.32.0/20"
          "10.64.48.0/21"
          "10.64.56.0/24"
          "10.64.57.0/26"
          "10.64.57.64/27"
          "10.64.57.96/28"
          "10.64.57.112/30"
          "10.64.57.116/31"
          "10.64.57.119/32"
          "10.64.57.120/29"
          "10.64.57.128/25"
          "10.64.58.0/23"
          "10.64.60.0/22"
          "10.64.64.0/18"
          "10.64.128.0/17"
          "10.65.0.0/16"
          "10.66.0.0/16"
          "10.67.0.0/17"
          "10.67.128.0/18"
          "10.67.192.0/19"
          "10.67.224.0/21"
          "10.67.232.0/22"
          "10.67.236.0/23"
          "10.67.238.0/27"
          "10.67.238.32/31"
          "10.67.238.35/32"
          "10.67.238.36/30"
          "10.67.238.40/29"
          "10.67.238.48/28"
          "10.67.238.64/26"
          "10.67.238.128/25"
          "10.67.239.0/24"
          "10.67.240.0/20"
          "10.68.0.0/14"
          "10.72.0.0/13"
          "10.80.0.0/12"
          "10.96.0.0/11"
          "10.128.0.0/9"
          "11.0.0.0/8"
          "12.0.0.0/6"
          "16.0.0.0/4"
          "32.0.0.0/4"
          "48.0.0.0/7"
          "50.0.0.0/8"
          "51.0.0.0/9"
          "51.128.0.0/10"
          "51.192.0.0/12"
          "51.208.0.0/13"
          "51.216.0.0/14"
          "51.220.0.0/15"
          "51.222.0.0/17"
          "51.222.128.0/26"
          "51.222.128.64/27"
          "51.222.128.96/28"
          "51.222.128.112/31"
          "51.222.128.115/32"
          "51.222.128.116/30"
          "51.222.128.120/29"
          "51.222.128.128/25"
          "51.222.129.0/24"
          "51.222.130.0/23"
          "51.222.132.0/22"
          "51.222.136.0/21"
          "51.222.144.0/20"
          "51.222.160.0/19"
          "51.222.192.0/18"
          "51.223.0.0/16"
          "51.224.0.0/11"
          "52.0.0.0/6"
          "56.0.0.0/5"
          "64.0.0.0/2"
          "128.0.0.0/3"
          "160.0.0.0/4"
          "176.0.0.0/7"
          "178.0.0.0/9"
          "178.128.0.0/11"
          "178.160.0.0/13"
          "178.168.0.0/14"
          "178.172.0.0/15"
          "178.174.0.0/16"
          "178.175.0.0/17"
          "178.175.128.0/23"
          "178.175.130.0/24"
          "178.175.131.0/26"
          "178.175.131.64/27"
          "178.175.131.96/31"
          "178.175.131.99/32"
          "178.175.131.100/30"
          "178.175.131.104/29"
          "178.175.131.112/28"
          "178.175.131.128/25"
          "178.175.132.0/22"
          "178.175.136.0/21"
          "178.175.144.0/20"
          "178.175.160.0/19"
          "178.175.192.0/18"
          "178.176.0.0/12"
          "178.192.0.0/10"
          "179.0.0.0/8"
          "180.0.0.0/6"
          "184.0.0.0/5"
          "192.0.0.0/10"
          "192.64.0.0/11"
          "192.96.0.0/15"
          "192.98.0.0/16"
          "192.99.0.0/21"
          "192.99.8.0/22"
          "192.99.12.0/23"
          "192.99.14.0/25"
          "192.99.14.128/26"
          "192.99.14.192/29"
          "192.99.14.200/31"
          "192.99.14.202/32"
          "192.99.14.204/30"
          "192.99.14.208/28"
          "192.99.14.224/27"
          "192.99.15.0/24"
          "192.99.16.0/20"
          "192.99.32.0/19"
          "192.99.64.0/18"
          "192.99.128.0/17"
          "192.100.0.0/14"
          "192.104.0.0/13"
          "192.112.0.0/12"
          "192.128.0.0/11"
          "192.160.0.0/13"
          "192.169.0.0/16"
          "192.170.0.0/15"
          "192.172.0.0/14"
          "192.176.0.0/12"
          "192.192.0.0/10"
          "193.0.0.0/8"
          "194.0.0.0/7"
          "196.0.0.0/6"
          "200.0.0.0/5"
          "208.0.0.0/4"
          "224.0.0.0/3"
        ];
      };
      mullvad-us241 = makeMullvadConfig {
        publicKey = "AgaO2dCgD3SNEW8II143+pcMREFsnkoieay25nFLxDs=";
        endpoint = "23.226.135.50:51820";
        allowedIPs = [
          "0.0.0.0/5"
          "8.0.0.0/7"
          "10.0.0.0/10"
          "10.64.0.0/19"
          "10.64.32.0/20"
          "10.64.48.0/21"
          "10.64.56.0/24"
          "10.64.57.0/26"
          "10.64.57.64/27"
          "10.64.57.96/28"
          "10.64.57.112/30"
          "10.64.57.116/31"
          "10.64.57.119/32"
          "10.64.57.120/29"
          "10.64.57.128/25"
          "10.64.58.0/23"
          "10.64.60.0/22"
          "10.64.64.0/18"
          "10.64.128.0/17"
          "10.65.0.0/16"
          "10.66.0.0/16"
          "10.67.0.0/17"
          "10.67.128.0/18"
          "10.67.192.0/19"
          "10.67.224.0/21"
          "10.67.232.0/22"
          "10.67.236.0/23"
          "10.67.238.0/27"
          "10.67.238.32/31"
          "10.67.238.35/32"
          "10.67.238.36/30"
          "10.67.238.40/29"
          "10.67.238.48/28"
          "10.67.238.64/26"
          "10.67.238.128/25"
          "10.67.239.0/24"
          "10.67.240.0/20"
          "10.68.0.0/14"
          "10.72.0.0/13"
          "10.80.0.0/12"
          "10.96.0.0/11"
          "10.128.0.0/9"
          "11.0.0.0/8"
          "12.0.0.0/6"
          "16.0.0.0/6"
          "20.0.0.0/7"
          "22.0.0.0/8"
          "23.0.0.0/9"
          "23.128.0.0/10"
          "23.192.0.0/11"
          "23.224.0.0/15"
          "23.226.0.0/17"
          "23.226.128.0/22"
          "23.226.132.0/23"
          "23.226.134.0/24"
          "23.226.135.0/27"
          "23.226.135.32/28"
          "23.226.135.48/31"
          "23.226.135.51/32"
          "23.226.135.52/30"
          "23.226.135.56/29"
          "23.226.135.64/26"
          "23.226.135.128/25"
          "23.226.136.0/21"
          "23.226.144.0/20"
          "23.226.160.0/19"
          "23.226.192.0/18"
          "23.227.0.0/16"
          "23.228.0.0/14"
          "23.232.0.0/13"
          "23.240.0.0/12"
          "24.0.0.0/5"
          "32.0.0.0/4"
          "48.0.0.0/7"
          "50.0.0.0/8"
          "51.0.0.0/9"
          "51.128.0.0/10"
          "51.192.0.0/12"
          "51.208.0.0/13"
          "51.216.0.0/14"
          "51.220.0.0/15"
          "51.222.0.0/17"
          "51.222.128.0/26"
          "51.222.128.64/27"
          "51.222.128.96/28"
          "51.222.128.112/31"
          "51.222.128.115/32"
          "51.222.128.116/30"
          "51.222.128.120/29"
          "51.222.128.128/25"
          "51.222.129.0/24"
          "51.222.130.0/23"
          "51.222.132.0/22"
          "51.222.136.0/21"
          "51.222.144.0/20"
          "51.222.160.0/19"
          "51.222.192.0/18"
          "51.223.0.0/16"
          "51.224.0.0/11"
          "52.0.0.0/6"
          "56.0.0.0/5"
          "64.0.0.0/2"
          "128.0.0.0/2"
          "192.0.0.0/10"
          "192.64.0.0/11"
          "192.96.0.0/15"
          "192.98.0.0/16"
          "192.99.0.0/21"
          "192.99.8.0/22"
          "192.99.12.0/23"
          "192.99.14.0/25"
          "192.99.14.128/26"
          "192.99.14.192/29"
          "192.99.14.200/31"
          "192.99.14.202/32"
          "192.99.14.204/30"
          "192.99.14.208/28"
          "192.99.14.224/27"
          "192.99.15.0/24"
          "192.99.16.0/20"
          "192.99.32.0/19"
          "192.99.64.0/18"
          "192.99.128.0/17"
          "192.100.0.0/14"
          "192.104.0.0/13"
          "192.112.0.0/12"
          "192.128.0.0/11"
          "192.160.0.0/13"
          "192.169.0.0/16"
          "192.170.0.0/15"
          "192.172.0.0/14"
          "192.176.0.0/12"
          "192.192.0.0/10"
          "193.0.0.0/8"
          "194.0.0.0/7"
          "196.0.0.0/6"
          "200.0.0.0/5"
          "208.0.0.0/4"
          "224.0.0.0/3"
        ];
      };
      mullvad-us249 = makeMullvadConfig {
        publicKey = "TvqnL6VkJbz0KrjtHnUYWvA7zRt9ysI64LjTOx2vmm4=";
        endpoint = "198.54.135.130:51820";
        allowedIPs = [
          "0.0.0.0/5"
          "8.0.0.0/7"
          "10.0.0.0/10"
          "10.64.0.0/19"
          "10.64.32.0/20"
          "10.64.48.0/21"
          "10.64.56.0/24"
          "10.64.57.0/26"
          "10.64.57.64/27"
          "10.64.57.96/28"
          "10.64.57.112/30"
          "10.64.57.116/31"
          "10.64.57.119/32"
          "10.64.57.120/29"
          "10.64.57.128/25"
          "10.64.58.0/23"
          "10.64.60.0/22"
          "10.64.64.0/18"
          "10.64.128.0/17"
          "10.65.0.0/16"
          "10.66.0.0/16"
          "10.67.0.0/17"
          "10.67.128.0/18"
          "10.67.192.0/19"
          "10.67.224.0/21"
          "10.67.232.0/22"
          "10.67.236.0/23"
          "10.67.238.0/27"
          "10.67.238.32/31"
          "10.67.238.35/32"
          "10.67.238.36/30"
          "10.67.238.40/29"
          "10.67.238.48/28"
          "10.67.238.64/26"
          "10.67.238.128/25"
          "10.67.239.0/24"
          "10.67.240.0/20"
          "10.68.0.0/14"
          "10.72.0.0/13"
          "10.80.0.0/12"
          "10.96.0.0/11"
          "10.128.0.0/9"
          "11.0.0.0/8"
          "12.0.0.0/6"
          "16.0.0.0/4"
          "32.0.0.0/4"
          "48.0.0.0/7"
          "50.0.0.0/8"
          "51.0.0.0/9"
          "51.128.0.0/10"
          "51.192.0.0/12"
          "51.208.0.0/13"
          "51.216.0.0/14"
          "51.220.0.0/15"
          "51.222.0.0/17"
          "51.222.128.0/26"
          "51.222.128.64/27"
          "51.222.128.96/28"
          "51.222.128.112/31"
          "51.222.128.115/32"
          "51.222.128.116/30"
          "51.222.128.120/29"
          "51.222.128.128/25"
          "51.222.129.0/24"
          "51.222.130.0/23"
          "51.222.132.0/22"
          "51.222.136.0/21"
          "51.222.144.0/20"
          "51.222.160.0/19"
          "51.222.192.0/18"
          "51.223.0.0/16"
          "51.224.0.0/11"
          "52.0.0.0/6"
          "56.0.0.0/5"
          "64.0.0.0/2"
          "128.0.0.0/2"
          "192.0.0.0/10"
          "192.64.0.0/11"
          "192.96.0.0/15"
          "192.98.0.0/16"
          "192.99.0.0/21"
          "192.99.8.0/22"
          "192.99.12.0/23"
          "192.99.14.0/25"
          "192.99.14.128/26"
          "192.99.14.192/29"
          "192.99.14.200/31"
          "192.99.14.202/32"
          "192.99.14.204/30"
          "192.99.14.208/28"
          "192.99.14.224/27"
          "192.99.15.0/24"
          "192.99.16.0/20"
          "192.99.32.0/19"
          "192.99.64.0/18"
          "192.99.128.0/17"
          "192.100.0.0/14"
          "192.104.0.0/13"
          "192.112.0.0/12"
          "192.128.0.0/11"
          "192.160.0.0/13"
          "192.169.0.0/16"
          "192.170.0.0/15"
          "192.172.0.0/14"
          "192.176.0.0/12"
          "192.192.0.0/10"
          "193.0.0.0/8"
          "194.0.0.0/7"
          "196.0.0.0/7"
          "198.0.0.0/11"
          "198.32.0.0/12"
          "198.48.0.0/14"
          "198.52.0.0/15"
          "198.54.0.0/17"
          "198.54.128.0/22"
          "198.54.132.0/23"
          "198.54.134.0/24"
          "198.54.135.0/25"
          "198.54.135.128/31"
          "198.54.135.131/32"
          "198.54.135.132/30"
          "198.54.135.136/29"
          "198.54.135.144/28"
          "198.54.135.160/27"
          "198.54.135.192/26"
          "198.54.136.0/21"
          "198.54.144.0/20"
          "198.54.160.0/19"
          "198.54.192.0/18"
          "198.55.0.0/16"
          "198.56.0.0/13"
          "198.64.0.0/10"
          "198.128.0.0/9"
          "199.0.0.0/8"
          "200.0.0.0/5"
          "208.0.0.0/4"
          "224.0.0.0/3"
        ];
      };
    };
    # use mullvad-us249 by default
    systemd.services.wg-quick-mullvad-ca15.wantedBy = lib.mkForce [ ];
    systemd.services.wg-quick-mullvad-jp3.wantedBy = lib.mkForce [ ];
    systemd.services.wg-quick-mullvad-md1.wantedBy = lib.mkForce [ ];
    systemd.services.wg-quick-mullvad-us241.wantedBy = lib.mkForce [ ];
  };
}
